(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,a){e.exports=a(98)},58:function(e,t,a){},59:function(e,t,a){},95:function(e,t){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(48),i=a.n(o),s=(a(58),a(59),a(29)),c=a(11),l=a(1),u=a(2),h=a(4),m=a(3),p=a(5),d=a(13),v=a(10),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onClick=e.onClick,a.height=100,a.width=a.height,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.refs.canvas.getContext("2d");switch(this.drawSquare(e),this.props.cell){case 0:break;case 1:this.drawCircle(e);break;case 2:this.drawCross(e)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.refs.canvas.getContext("2d");switch(e.cell){case 0:break;case 1:this.drawCircle(t);break;case 2:this.drawCross(t)}}},{key:"drawSquare",value:function(e){e.strokeRect(0,0,this.height,this.width)}},{key:"drawCross",value:function(e){e.lineWidth=1,e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,this.height),e.stroke(),e.lineWidth=1,e.beginPath(),e.moveTo(this.width,0),e.lineTo(0,this.height),e.stroke()}},{key:"drawCircle",value:function(e){e.beginPath(),e.arc(this.height/2,this.height/2,this.height/3,0,2*Math.PI),e.stroke()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(){e.onClick(e.props.i,e.props.j)}},r.a.createElement("canvas",{ref:"canvas",width:this.width,height:this.height}))}}]),t}(r.a.Component),f=(a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={},a.onCellClick=a.onCellClick.bind(Object(v.a)(a)),a.onUpdateView=a.onUpdateView.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onCellClick",value:function(e,t){}},{key:"onUpdateView",value:function(e){}},{key:"getMessage",value:function(){}},{key:"render",value:function(){var e=this,t=null==this.state.board?[]:this.state.board.map(function(t,a){var n=t.map(function(t,n){return r.a.createElement("div",{key:n,style:{marginLeft:"5px",marginRight:"5px"}},r.a.createElement(b,{cell:t,i:a,j:n,onClick:e.onCellClick}))});return r.a.createElement("div",{key:a},n)});return r.a.createElement("div",null,r.a.createElement("h3",{style:{textAlign:"center"}},"Tic Tac Toe"),r.a.createElement("h3",{style:{textAlign:"center"}},this.getMessage()),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 col-sm-5"}),t))}}]),t}(r.a.Component)),g={P1_WON:1,P2_WON:2,TIE:3,GAME_ON:0},y=function(){function e(){Object(l.a)(this,e),this.currentPlayer=1,this.moves=0,this.rows=3,this.cols=3,this.board=this._generateBoard(),this.maxMoves=this.rows*this.cols,this.gameComplete=g.GAME_ON}return Object(u.a)(e,[{key:"_generateBoard",value:function(){for(var e=[],t=0;t<this.rows;t++){for(var a=[],n=0;n<this.cols;n++)a.push(0);e.push(a)}return e}}]),e}(),C=function(){function e(t){Object(l.a)(this,e),this._state=t||new y}return Object(u.a)(e,[{key:"getState",value:function(){return this._state}},{key:"doMove",value:function(e,t,a){return this._state.gameComplete?null:this._state.currentPlayer!=a?null:0!=this._state.board[e][t]?null:(this._updateModel(e,t,a),this._state)}},{key:"_updateModel",value:function(e,t,a){this._state.board[e][t]=a;var n=this._checkComplete(e,t,a);this._state.gameComplete=n,this._state.moves++,this._state.currentPlayer=this._state.moves%2+1}},{key:"_checkComplete",value:function(e,t,a){var n=1===a?g.P1_WON:g.P2_WON;return this._getCoinsCountInDir(e,t,1)+this._getCoinsCountInDir(e,t,5)>=2?n:this._getCoinsCountInDir(e,t,2)+this._getCoinsCountInDir(e,t,6)>=2?n:this._getCoinsCountInDir(e,t,3)+this._getCoinsCountInDir(e,t,7)>=2?n:this._getCoinsCountInDir(e,t,4)+this._getCoinsCountInDir(e,t,8)>=2?n:this._state.moves>=this._state.maxMoves-1?g.TIE:g.GAME_ON}},{key:"_getCoinsCountInDir",value:function(e,t,a){var n=this._state.board[e][t],r=0,o=[-1,0,1,1,1,0,-1,-1][a-=1],i=[-1,-1,-1,0,1,1,1,0][a];for(e+=i,t+=o;e>=0&&e<this._state.rows&&t>=0&&t<this._state.cols&&n==this._state.board[e][t];)r++,e+=i,t+=o;return r}}]),e}(),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).game=new C,a.state=a.game.getState(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onCellClick",value:function(e,t){var a=this.game.doMove(e,t,this.game._state.currentPlayer);this.onUpdateView(a)}},{key:"onUpdateView",value:function(e){this.setState(Object(d.a)({},e))}},{key:"getMessage",value:function(){return console.log(this.state),null==this.state?"loading":this.state.gameComplete===g.GAME_ON?1===this.state.currentPlayer?"Player 'O's turn":"Playe 'X's turn":this.state.gameComplete===g.TIE?"Its a Tie":"Player "+(this.state.gameComplete===g.P1_WON?"O":"X")+" won"}}]),t}(f),k=function(e){function t(e){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O,null))}}]),t}(r.a.Component);function j(e){var t,a,n;for(n in t=Array.isArray(e)?[]:{},e)a=e[n],t[n]="object"===typeof a?j(a):a;return t}var w=function(e){for(var t=[],a=0;a<e.rows;a++)for(var n=0;n<e.cols;n++)0===e.board[a][n]&&t.push([a,n]);return t},E=function e(t,a,n,r){if(a===r)return 0;var o=function(e,t){var a=0;switch(e.gameComplete){case g.P1_WON:a=1===t?10:-10;break;case g.P2_WON:a=2===t?10:-10;break;case g.TIE:a=0;break;default:a=0}return a}(t._state,n);if(10===o||-10===o||t._state.gameComplete===g.TIE)return o;var i=w(t._state),s=t._state.currentPlayer==n;o=s?-1e3:1e3;var c=!0,l=!1,u=void 0;try{for(var h,m=i[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var p=h.value,d=(p[0],p[1],new C(j(t._state)));d.doMove(p[0],p[1],d._state.currentPlayer);var v=e(d,a+1,n,r);s?v>o&&(o=v):v<o&&(o=v)}}catch(b){l=!0,u=b}finally{try{c||null==m.return||m.return()}finally{if(l)throw u}}return o},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=w(e),n=-1e3,r=[-1,-1],o=e.currentPlayer,i=!0,s=!1,c=void 0;try{for(var l,u=a[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value,m=h[0],p=h[1],d=new C(j(e));d.doMove(m,p,d._state.currentPlayer);var v=E(d,0,o,t);v>n&&(n=v,r=h)}}catch(b){s=!0,c=b}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}return r},P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).game=new C,a.state=a.game.getState(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onCellClick",value:function(e,t){if(2!==this.state.currentPlayer){var a=this.game.doMove(e,t,this.game._state.currentPlayer);this.onUpdateView(a)}}},{key:"onUpdateView",value:function(e){var t=this;this.setState(Object(d.a)({},e),function(){if(2===t.state.currentPlayer){var e=_(t.state),a=t.game.doMove(e[0],e[1],t.state.currentPlayer);setTimeout(function(){t.onUpdateView(a)},100)}})}},{key:"getMessage",value:function(){return null==this.state?"loading":this.state.gameComplete===g.GAME_ON?1===this.state.currentPlayer?"Player 'O's turn":"Playe 'X's turn":this.state.gameComplete===g.TIE?"Its a Tie":"Player "+(this.state.gameComplete===g.P1_WON?"O":"X")+" won"}}]),t}(f),N=function(e){function t(e){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P,null))}}]),t}(r.a.Component),S=a(15),x=a.n(S),M=a(30),I=function(e){function t(e){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null==this.props.msg||""===this.props.msg?null:r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"Error!")," ",this.props.msg)}}]),t}(r.a.Component),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).onSelectChange=function(e){a.setState({select:e.target.value})},a.onStartLocal=function(){a.props.history.push("/app/local")},a.onStartAi=function(){a.props.history.push("/app/ai")},a.onCreateGame=Object(M.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a.state.room&&""!=a.state.room){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/canCreate/".concat(a.state.room));case 4:return t=e.sent,e.next=7,t.json();case 7:if(!e.sent.response){e.next=10;break}return e.abrupt("return",a.props.history.push("/app/online?room=".concat(a.state.room,"&created=1")));case 10:a.setState({error:"cannot create room, room already exist"});case 11:case"end":return e.stop()}},e)})),a.onJoinGame=Object(M.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a.state.room&&""!=a.state.room){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/canJoin/".concat(a.state.room));case 4:return t=e.sent,e.next=7,t.json();case 7:if(!e.sent.response){e.next=10;break}return e.abrupt("return",a.props.history.push("/app/online?room=".concat(a.state.room,"&created=0")));case 10:a.setState({error:"cannot join room, room is not available"});case 11:case"end":return e.stop()}},e)})),a.onP1change=function(e){a.setState({p1:e.target.value})},a.onP2change=function(e){a.setState({p2:e.target.value})},a.onRoomChange=function(e){a.setState({room:e.target.value})},a.onAiChange=function(e){console.log(e),a.setState({ai:e.target.value})},a.options=["local","ai","online"],a.state={select:a.options[0],p1:"",p2:"",room:"",ai:"0",error:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:this.onStartLocal},"Start game")),t=r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:this.onStartAi},"Start game")),a=r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Room id:"),r.a.createElement("input",{type:"number",className:"form-control",value:this.state.room,onChange:this.onRoomChange})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.onCreateGame},"Create Game")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.onJoinGame},"Join Game")))),n=r.a.createElement("div",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Select Option:"),r.a.createElement("select",{className:"form-control",onChange:this.onSelectChange,value:this.state.select},r.a.createElement("option",{value:this.options[0]},"Play Locally"),r.a.createElement("option",{value:this.options[1]},"Play againts Computer"))),this.state.select===this.options[0]?e:null,this.state.select===this.options[1]?t:null,this.state.select===this.options[2]?a:null);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{style:{textAlign:"center"}},"TIC TAC TOE"))),r.a.createElement(I,{msg:this.state.error}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},n)))}}]),t}(r.a.Component),A=Object(c.d)(T),W=a(51),G=a.n(W),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).socket=G()("/"),1===a.props.whoami?a.socket.emit("create",a.props.id):a.socket.emit("join",a.props.id),a.socket.on("updateView",a.onUpdateView),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onCellClick",value:function(e,t){this.props.whoami===this.state.currentPlayer&&this.socket.emit("move",{i:e,j:t})}},{key:"onUpdateView",value:function(e){this.setState(Object(d.a)({},e))}},{key:"getMessage",value:function(){return null==this.state.board?"loading":this.state.gameComplete===g.GAME_ON?1===this.state.currentPlayer?"Player 'O's turn":"Playe 'X's turn":this.state.gameComplete===g.TIE?"Its a Tie":"Player "+(this.state.gameComplete==g.P1_WON?"O":"X")+" won"}}]),t}(f),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={showBoard:!1,whoami:null,id:""},a.onChange=a.onChange.bind(Object(v.a)(a)),a.create=a.create.bind(Object(v.a)(a)),a.join=a.join.bind(Object(v.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState({id:e.target.value})}},{key:"create",value:function(){this.setState({whoami:1,showBoard:!0})}},{key:"join",value:function(){this.setState({whoami:2,showBoard:!0})}},{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("input",{type:"number",onChange:this.onChange}),r.a.createElement("button",{onClick:this.create},"create"),r.a.createElement("button",{onClick:this.join},"join")),t=r.a.createElement(V,{whoami:this.state.whoami,id:this.state.id,show:this.state.showBoard});return r.a.createElement("div",null,this.state.showBoard?t:e)}}]),t}(r.a.Component),U=a(52),B=a.n(U),X=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(B.a,{params:J,className:"particles"})}}]),t}(n.Component),J={particles:{number:{value:150,density:{enable:!0,value_area:1803.4120608655228}},color:{value:"#ff0000"},shape:{type:"circle",stroke:{width:1,color:"black"},polygon:{nb_sides:4}},opacity:{value:.3,random:!1,anim:{enable:!1,speed:1,opacity_min:.3,sync:!1}},size:{value:5,random:!0,anim:{enable:!1,speed:40,size_min:1,sync:!1}},line_linked:{enable:!0,distance:0,color:"#ffffff",opacity:.3687847739990702,width:.6413648243462091},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"window",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!1,mode:"bubble"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:100,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0};var R=function(){var e={position:"absolute",top:0,left:0,width:"100%",height:"100%"};return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement("div",{style:e},r.a.createElement(X,null),r.a.createElement("div",{style:e},r.a.createElement(c.a,{exact:!0,path:"/app",component:A}),r.a.createElement(c.a,{path:"/app/local/",component:k}),r.a.createElement(c.a,{path:"/app/ai/",component:N}),r.a.createElement(c.a,{path:"/app/online/",component:D})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.5a81b7f2.chunk.js.map